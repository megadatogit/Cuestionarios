<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="/media/favicon.ico" type="image/x-icon">
    <title>Cuestionario Etapa 1</title>
    <link rel="stylesheet" href="../Cuestionario01/etapa1Q.css" />
  </head>

  <body>
    <header class="header">
      <img
        class="logo-header"
        src="../media/04LogoLSTransSlogan.png"
        alt="LiberSalus"
      />
      <div class="encabezado">
        <p>HISTORIAL CLÍNICO DIGITAL</p>
      </div>
    </header>

    <!-- CONTENEDOR FIJO -->
    <div class="fixed">
      <div class="cnt-user">
        <p class="perfil">TITULAR</p>
        <p class="usuario">(USUARIO)</p>
      </div>

      <div class="etapa">
        <p class="numero">1</p>
        <p class="texto">
          Primera etapa <br />
          Datos personales
        </p>
      </div>

      <div class="cnt-progreso">
        <div id="progreso"></div>
      </div>

      <div class="cnt-pregunta">
        <p class="help">?</p>
        <p>
          Da clic en el icono <br />
          para consultar <br />
          informacion
        </p>
      </div>
    </div>

    <!-- CONTENEDOR DE PREGUNTAS -->
    <div class="preguntas">
      <div class="item">
        <div class="tipo"><strong>IDENTIDAD</strong></div>
        <div class="cnt-campo">
          <div class="campo">
            <label for="nombres">NOMBRE</label>
            <input
              type="text"
              id="nombres"
              required
              spellcheck="false"
              placeholder="NOMBRE(s)"
            />
          </div>
          <div class="campo">
            <label for="primer_apellido">PRIMER APELLIDO</label>
            <input
              type="text"
              id="primer_apellido"
              required
              spellcheck="false"
              placeholder="PRIMER APELLIDO"
            />
          </div>
          <div class="campo">
            <label for="segundo_apellido">SEGUNDO APELLIDO</label>
            <input
              type="text"
              id="segundo_apellido"
              spellcheck="false"
              placeholder="SEGUNDO APELLIDO"
            />
          </div>
        </div>
        <div class="cnt-campo">
          <div class="campo">
            <label for="lugar_nacimiento">LUGAR DE NACIMIENTO</label>
            <input
              type="text"
              id="lugar_nacimiento"
              required
              spellcheck="false"
              placeholder="ENTIDAD FEDERATIVA DE NACIMIENTO"
            />
          </div>
          <div class="campo">
            <label for="sexo">SEXO BIOLOGICO</label>
            <select id="sexo">
              <option value="masculino">MASCULINO</option>
              <option value="femenino">FEMENINO</option>
              <option value="no_sabe">NO SABE</option>
            </select>
          </div>

          <div class="campo">
            <label for="">FECHA DE NACIMIENTO</label>
            <input
              id="fecha_nacimiento"
              type="date"
              required
              spellcheck="false"
              placeholder="max 40 palabras"
            />
          </div>
        </div>

        <div class="item">
          <div class="tipo"><strong>DOMICILIO ACTUAL</strong></div>
          <div class="cnt-campo">
            <div class="campo">
              <label for="codigo_postal">CÓDIGO POSTAL</label>
              <input
                type="text"
                id="codigo_postal"
                oninput="this.value = this.value.replace(/[^\d]/g, '').slice(0, 5);"
                maxlength="5"
                placeholder="CP A 5 DIGITOS"
                required
                onblur="validarCP()"
              />
            </div>
            <div class="campo">
              <label for="entidad_federativa">ENTIDAD FEDERATIVA</label>
              <input
                type="text"
                id="entidad_federativa"
                required
                spellcheck="false"
                placeholder="DIGITE ESTADO"
              />
            </div>
            <div class="campo">
              <label for="municipio">MUNICIPIO O DEMARCACIÓN TERRITORIAL</label>
              <input
                type="text"
                id="municipio"
                required
                spellcheck="false"
                placeholder="DELEGACIÓN O MUNICIPIO"
              />
            </div>
          </div>
          <div class="cnt-campo">
            <div class="campo">
              <label for="calle">CALLE</label>
              <input
                type="text"
                id="calle"
                required
                spellcheck="false"
                placeholder="AVENIDA CALLE CERRADA ... "
              />
            </div>
            <div class="campo">
              <label for="colonia">COLONIA</label>
              <input
                type="text"
                id="colonia"
                required
                spellcheck="false"
                placeholder="COLONIA"
              />
            </div>
            <div class="campo">
              <label for="numero_exterior">NO. EXTERIOR</label>
              <input
                type="text"
                id="numero_exterior"
                required
                spellcheck="false"
                placeholder="NÚMERO EXTERIOR"
              />
            </div>
            <div class="campo">
              <label for="numero_interior">NO. INTERIOR</label>
              <input
                type="text"
                id="numero_interior"
                required
                spellcheck="false"
                placeholder="NÚMERO INTERIOR"
              />
            </div>
          </div>
        </div>
        <div class="item">
          <div class="tipo">
            <strong>DATOS <br />COMPLEMENTARIOS</strong>
          </div>

          <div class="item">
            <div class="tipo"><strong>DATOS DE CONTACTO</strong></div>
            <div class="cnt-campo">
              <div class="campo">
                <label for="telefono1">TELEFONO 1</label>
                <input
                  type="tel"
                  id="telefono1"
                  required
                  oninput="this.value = this.value.slice(0, 10)"
                  spellcheck="false"
                  placeholder="a 10 dígitos"
                />
              </div>
              <div class="campo">
                <label for="telefono2">TELEFONO 2</label>
                <input
                  type="tel"
                  id="telefono2"
                  required
                  oninput="this.value = this.value.slice(0, 10)"
                  spellcheck="false"
                  placeholder="a 10 dígitos"
                />
              </div>
              <div class="campo">
                <label for="correo_electronico">CORREO ELECTRONICO</label>
                <input
                  type="email"
                  id="correo_electronico"
                  required
                  spellcheck="false"
                  placeholder="correo@dominio.ext"
                />
              </div>
            </div>
          </div>

          <div class="tipo"><strong>DATOS SOCIOECONÓMICOS</strong></div>
          <div class="campo">
            <label for="">ESCOLARIDAD</label>
            <select name="combo" id="escolaridad">
              <option value="opcion1">SIN ESTUDIOS</option>
              <option value="opcion2">PRIMARIA</option>
              <option value="opcion3">SECUNDARIA</option>
              <option value="opcion4">BACHILLERATO</option>
              <option value="opcion5">TÉCNICO</option>
              <option value="opcion6">LICENCIATURA</option>
              <option value="opcion7">ESPECIALIDAD</option>
              <option value="opcion8">MAESTRIA</option>
              <option value="opcion9">DOCTORADO</option>
            </select>
          </div>

          <div class="campo">
            <label for="">RELIGIÓN</label>
            <input
              type="text"
              required
              spellcheck="false"
              placeholder="religión que profesa"
              id="religion"
            />
          </div>

          <div class="campo">
            <label for="">ESTADO CIVIL</label>
            <select name="combo" id="estado_civil">
              <option value="opcion1">SOLTERO</option>
              <option value="opcion2">UNION LIBRE</option>
              <option value="opcion4">CONCUBINATO</option>
              <option value="opcion5">CASADO</option>
              <option value="opcion6">DIVORCIADO</option>
              <option value="opcion7">VIUDO</option>
            </select>
          </div>

          <div class="campo">
            <label for="">OCUPACIÓN</label>
            <input
              type="text"
              required
              spellcheck="false"
              placeholder="A QUÉ SE DEDICA"
              id="ocupacion"
            />
          </div>

          <div class="campo">
            <label for="">ingresos</label>
                <select name="combo" id="ingresos">
                  <option value="opcion1">MENOS DE 2,500</option>
                  <option value="opcion2"> 2,500 A 14,999</option>
                  <option value="opcion3">15,000 A 29,999</option>
                  <option value="opcion4">30,000 A 49,999</option>
                  <option value="opcion5">50,000 A 69,999 </option>
                  <option value="opcion6">MAS DE 70,000</option>
                  
                </select>
          </div>
        </div>
      </div>

      <div class="cnt-btn">
        <a href="/Cuestionario01/etapa2.html"><button type="button" id="">ENVIAR</button></a>
        
      </div>
    </div>

    <div class="foot">
      <div class="pie">
        <p>LIBER SALUS S.A. DE C.V. MÉXICO 2025</p>
      </div>
    </div>

    <script>
      document.getElementById("enviar").addEventListener("click", function () {
        const data = {
          nombres: document.getElementById("nombres").value,
          primerApellido: document.getElementById("primer_apellido").value,
          segundoApellido: document.getElementById("segundo_apellido").value,
          lugarNacimiento: document.getElementById("lugar_nacimiento").value,
          fechaNacimiento: document.getElementById("fecha_nacimiento").value,
          sexo: document.getElementById("sexo").value,
          codigoPostal: document.getElementById("codigo_postal").value,
          entidadFederativa: document.getElementById("entidad_federativa").value,
          municipio: document.getElementById("municipio").value,
          calle: document.getElementById("calle").value,
          colonia: document.getElementById("colonia").value,
          numeroExterior: document.getElementById("numero_exterior").value,
          numeroInterior: document.getElementById("numero_interior").value,
          telefono1: document.getElementById("telefono1").value,
          telefono2: document.getElementById("telefono2").value,
          correoElectronico: document.getElementById("correo_electronico").value,
          escolaridad: document.getElementById("escolaridad").value,
          religion: document.getElementById("religion").value,
          estadoCivil: document.getElementById("estado_civil").value,
          ocupacion: document.getElementById("ocupacion").value,
          ingresos: document.getElementById("ingresos").value

        };

        // Enviar los datos como JSON
        fetch("http://localhost:3000/guardar", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify(data),
        })
          .then((response) => {
            if (response.ok) {
              alert("Formulario enviado correctamente");
            } else {
              alert("Hubo un error al enviar el formulario");
            }
          })
          .catch((error) => {
            alert("Error en la conexión");
          });
      });

      //validar campo CP

      function validarCP() {
        const cp = document.getElementById("codigo_postal").value;

        // Comprueba si la longitud no es igual a 5
        if (cp.length !== 5) {
          alert("Por favor, introduce exactamente 5 números");
        } else {
          // Aquí puedes convertir a entero si lo necesitas
          const cpNumero = parseInt(cp, 10);
          console.log("Código Postal como número:", cpNumero); // Para ver el valor en la consola
        }
      }
    </script>
  </body>

  <script type="module" src="../Cuestionario01/progreso.js"></script>
  <script type="module" src="../Cuestionario01/etapaQ1db.js"></script>
</html>
